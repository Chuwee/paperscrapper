STATUS: TODO

# PR 006: The Scheduler (Main Entry)

**Objective:** Create the main driver script that runs the entire pipeline periodically.

**Context:**
This is the executable that brings `harvester`, `database`, `brain`, and `bot` together.

**Requirements:**

1.  **Main Script (`main.py`):**
    *   Initialize DB.
    *   Start Bot (in non-blocking mode if possible, or use a separate process for the bot vs the crons). *Better approach for Python Telegram Bot:* Run the Bot polling as the main process, and use `JobQueue` (built-in PTB feature) for the fetching task.

2.  **JobQueue Implementation:**
    *   Define `daily_briefing_job(context)`:
        1.  `harvester.fetch_papers()` -> Save new ones to DB.
        2.  `users = db.get_active_users()`.
        3.  For each `user`:
            *   `recommendations = manager.get_matches_for_user(user.id)`.
            *   For `paper` in `recommendations`:
                *   `bot.send_paper(user.chat_id, paper)`.
                *   Sleep 1s (rate limit).

3.  **Scheduling:**
    *   Schedule `daily_briefing_job` to run every 24 hours (or specific time like 08:00 UTC).

4.  **Startup:**
    *   Ensure `if __name__ == "__main__":` runs `application.run_polling()`.

**Acceptance Criteria:**
*   Running `python main.py` starts the bot.
*   The scheduled job triggers (can test by setting interval to 10 seconds).
*   End-to-end flow: Paper fetched -> User processed -> Message received.
